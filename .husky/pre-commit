#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Stage all changes first
git add .

# Run formatter for Markdown and JSON files
npx prettier --write "**/*.{md,json}"

# Add formatted files to staging area again (in case prettier made changes)
git add .

# Run Markdown linter
npx remark . --quiet --frail

# Check if the linter found any errors
if [ $? -ne 0 ]; then
  echo "Markdown linting failed. Please fix the errors before committing."
  exit 1
fi
