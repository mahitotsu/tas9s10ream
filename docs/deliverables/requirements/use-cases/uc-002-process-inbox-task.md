# ID: RDD-UCA-2025-002

# ユースケース: インボックスのタスクを処理する

## 概要

ユーザーがインボックスに収集されたタスクを、GTDの原則に基づいて分類・処理します。

### アクター

- 主アクター:
  [ACT-001 (ITプロジェクトメンバー)](../actors/act-001-it-project-member.md)
- 副アクター:
  [ACT-002 (ITプロジェクト管理者)](../actors/act-002-it-project-manager.md)

### 事前条件

- ユーザーがシステムにログインしていること。
- インボックス画面が表示されており、未処理のタスクが存在すること。

### 基本フロー

1. ユーザーはインボックス画面で未処理のタスクを選択する。
1. システムは選択されたタスクの詳細を表示する。
1. ユーザーはタスクの内容を確認し、以下のいずれかの処理を選択する。
   - **2分以内で完了する場合**: 「今すぐ実行」を選択し、タスクを完了としてマークする。
   - **委任する場合**: 「委任」を選択し、担当者と期限を設定して連絡待ちリストに追加する。
   - **後で実行する場合**: 「後で実行」を選択し、以下のいずれかのオプションを選択する。
     - プロジェクトに紐付ける場合: 既存のプロジェクトを選択するか、新規プロジェクトを作成してタスクを紐付ける。
     - 次の行動リストに追加する場合: コンテキストと期限を設定して追加する。
     - いつか/多分リストに追加する場合: いつか/多分リストに追加する。
   - **不要な場合**: 「削除」を選択し、タスクを削除する。
1. システムは選択された処理に基づいてタスクの状態と所属を更新する。
1. システムは処理完了をユーザーに通知する。

インボックスのタスクを処理するユースケースのシーケンスを示します。

```mermaid
sequenceDiagram
    actor User
    participant System

    User->>System: インボックス画面で未処理タスクを選択
    System->>User: 選択されたタスクの詳細を表示
    User->>System: タスクの処理を選択 (例: 「今すぐ実行」)
    alt 2分以内で完了
        User->>System: 「今すぐ実行」を選択
        System->>System: タスクを完了としてマーク
    alt 委任
        User->>System: 「委任」を選択し、担当者と期限を設定
        System->>System: 連絡待ちリストに追加
    alt 後で実行 (プロジェクトに紐付け)
        User->>System: 「後で実行」を選択し、プロジェクトを選択/作成
        System->>System: タスクをプロジェクトに紐付け
    alt 後で実行 (次の行動リストに追加)
        User->>System: 「後で実行」を選択し、コンテキストと期限を設定
        System->>System: 次の行動リストに追加
    alt 後で実行 (いつか/多分リストに追加)
        User->>System: 「後で実行」を選択
        System->>System: いつか/多分リストに追加
    alt 不要
        User->>System: 「削除」を選択
        System->>System: タスクを削除
    end
    System->>System: タスクの状態と所属を更新
    System-->>User: 処理完了を通知
```

### 代替フロー

- なし

### 例外フロー

- **入力情報不足**: ユーザーが委任やプロジェクト紐付けに必要な情報（例: 担当者、期限、プロジェクト名）を入力せずに処理しようとした場合、システムはエラーメッセージを表示し、入力を促す。
- **システムエラー**: システムがタスクの処理に失敗した場合、システムはエラーを通知し、ユーザーは再試行できる。

### 事後条件

- 選択されたタスクが、ユーザーの選択に基づいて適切な状態（完了、連絡待ち、プロジェクト紐付け済み、次の行動、いつか/多分、削除済み）に更新されていること。
- ユーザーにタスク処理完了の通知が表示されていること。

### 関連する機能要件

- [FR-002 (タスク処理機能)](../functional-requirements/fr-002-task-processing-function.md)
- [FR-006 (プロジェクト管理機能)](../functional-requirements/fr-006-project-management-function.md)
- [FR-007 (コンテキスト管理機能)](../functional-requirements/fr-007-context-management-function.md)

### 関連する業務フロー

- [BF-002 (タスク処理フロー)](../business-flows/bf-002-task-processing-flow.md)

### 関連する画面

- [SCR-002 (インボックス画面)](../screens/scr-002-inbox-screen.md)
- [SCR-007 (タスク詳細画面)](../screens/scr-007-task-detail-screen.md)
