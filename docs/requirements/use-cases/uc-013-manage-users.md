# ID: RDD-UCA-2025-013

# ユースケース: ユーザーを管理する

## 概要

ITプロジェクト管理者が、システムに登録されているユーザーの情報を管理し、ロールや権限を設定します。

### アクター

- 主アクター: ACT-002 (ITプロジェクト管理者)

### 事前条件

- ユーザーがシステムにログインしていること。
- ユーザー管理画面にアクセスできること。

### 基本フロー

1. ユーザーはユーザー管理画面にアクセスする。
1. システムは登録されているユーザーの一覧を表示する。
1. ユーザーは以下のいずれかの操作を行う。
   - 新しいユーザーを登録する: ユーザー情報（氏名、メールアドレスなど）と初期ロール・権限を入力し、「登録」ボタンをクリックする。
   - 既存ユーザーの情報を更新する: ユーザーを選択し、情報を編集後、「更新」ボタンをクリックする。
   - 既存ユーザーのロール・権限を変更する: ユーザーを選択し、新しいロール・権限を設定後、「保存」ボタンをクリックする。
   - 既存ユーザーを削除する: ユーザーを選択し、「削除」ボタンをクリックする。
1. システムはユーザーの操作に基づいてユーザー情報、ロール、または権限を更新する。
1. システムは操作完了をユーザーに通知する。

ユーザーを管理するユースケースのシーケンスを示します。

```mermaid
sequenceDiagram
    actor User
    participant System

    User->>System: ユーザー管理画面にアクセス
    System->>User: 登録されているユーザーの一覧を表示
    alt 新しいユーザーを登録
        User->>System: ユーザー情報と初期ロール・権限を入力し、「登録」ボタンをクリック
        System->>System: ユーザー情報を検証
        alt 入力情報が有効
            System->>System: 新しいユーザーを登録
            System-->>User: 操作完了を通知
        else 入力情報が無効
            System-->>User: エラーメッセージを表示 (再入力を促す)
        end
    alt 既存ユーザーの情報を更新
        User->>System: ユーザーを選択し、情報を編集後、「更新」ボタンをクリック
        System->>System: ユーザー情報を更新
        System-->>User: 操作完了を通知
    alt 既存ユーザーのロール・権限を変更
        User->>System: ユーザーを選択し、新しいロール・権限を設定後、「保存」ボタンをクリック
        System->>System: ロール・権限を更新
        System-->>User: 操作完了を通知
    alt 既存ユーザーを削除
        User->>System: ユーザーを選択し、「削除」ボタンをクリック
        System->>System: ユーザーを削除
        System-->>User: 操作完了を通知
    end
```

### 代替フロー

- なし

### 例外フロー

- **入力情報不足/無効**: ユーザー登録・更新時に必須項目が不足している、または無効な情報が入力された場合、システムはエラーメッセージを表示し、再入力を促す。
- **権限不足**: ユーザーが操作に必要な権限を持っていない場合、システムはエラーメッセージを表示し、操作を拒否する。
- **システムエラー**: システムがユーザー情報の更新に失敗した場合、システムはエラーを通知し、ユーザーは再試行できる。

### 事後条件

- ユーザー情報、ロール、または権限が更新されていること。
- ユーザーに操作完了の通知が表示されていること。

### 関連する機能要件

- FR-019 (ユーザー管理機能)
- FR-020 (ロール・権限管理機能)
- FR-026 (ユーザー情報管理機能)
- FR-027 (ロール・権限管理機能)

### 関連する業務フロー

- なし (直接的な業務フローは存在しないが、プロジェクト管理の運用の一部)

### 関連する画面

- SCR-017 (ユーザー管理画面)
