# ID: RDD-BF-2025-007

# 業務フロー: パスワードリセットフロー

## 概要

ユーザーがパスワードを忘れた際に、システムに登録されているメールアドレスを使用してパスワードをリセットするプロセスを定義します。

### アクター

- 主アクター: ユーザー
- システム

### 事前条件

- ユーザーがシステムに登録されていること。
- ユーザーがログイン画面にアクセスできること。

### 基本フロー

1. ユーザーはログイン画面で「パスワードを忘れた場合」リンクをクリックする。
1. システムはパスワードリセット画面（SCR-019）を表示する。
1. ユーザーは登録済みのメールアドレスを入力し、送信ボタンをクリックする。
1. システムは入力されたメールアドレスを検証する。
1. システムはメールアドレスが有効な場合、パスワードリセット用のリンクまたはコードをユーザーのメールアドレスに送信する。
1. システムはユーザーにリセットメール送信完了のメッセージを表示する。
1. ユーザーは受信したメール内のリンクをクリックするか、コードを入力して新しいパスワードを設定する。
1. システムは新しいパスワードを保存し、パスワードリセット完了のメッセージを表示する。

パスワードリセットフローの概要を示します。

```mermaid
graph TD
    A[ユーザー: ログイン画面で「パスワードを忘れた場合」をクリック] --> B(システム: パスワードリセット画面<br/>(SCR-019)を表示);
    B --> C[ユーザー: メールアドレスを入力し、送信ボタンをクリック];
    C --> D{システム: メールアドレスを検証};
    D -- 有効 --> E(システム: パスワードリセットメールを送信);
    E --> F(システム: リセットメール送信完了メッセージを表示);
    F --> G[ユーザー: 受信したメールのリンクをクリック/コードを入力];
    G --> H[ユーザー: 新しいパスワードを設定];
    H --> I(システム: 新しいパスワードを保存);
    I --> J(システム: パスワードリセット完了メッセージを表示);
    D -- 無効 --> K(システム: エラーメッセージを表示);
```

### 代替フロー

- なし

### 例外フロー

- **メールアドレス未登録**: 入力されたメールアドレスがシステムに登録されていない場合、システムはエラーメッセージを表示する。
- **メール送信失敗**: システムがリセットメールの送信に失敗した場合、システムはエラーメッセージを表示する。
- **リンクの有効期限切れ**: リセットリンクの有効期限が切れている場合、システムはエラーメッセージを表示し、再度のリセット手続きを促す。

### 事後条件

- ユーザーが新しいパスワードを設定し、ログインできる状態になっていること。

### 関連するユースケース

- UC-017 (パスワードをリセットする)

### 関連する画面

- SCR-001 (ログイン画面)
- SCR-019 (パスワードリセット画面)
